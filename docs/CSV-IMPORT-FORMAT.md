# Формат CSV для импорта блюд

## Структура файла

CSV файл должен содержать следующие столбцы (в указанном порядке):

```
Название, Цена, Единица, Категория, Теги, Срок хранения, Состав, Аллергены, Фото, Alt, КБЖУ, Тип продажи, Glovo/Uber, Glovo URL, Uber URL, Активно
```

## Описание столбцов

### Обязательные поля

1. **Название** (текст)
   - Название блюда
   - Пример: `Борщ`, `Паста карбонара`

2. **Цена** (число)
   - Цена в евро
   - Разделитель: точка или запятая
   - Пример: `6.5` или `6,5`

3. **Единица** (текст)
   - Единица измерения и количество порций
   - Пример: `500 мл`, `200 г 2 порции`

4. **Категория** (текст)
   - Категория блюда
   - Пример: `Суп`, `Завтрак`, `Основные блюда`

5. **Теги** (текст, через запятую)
   - Теги для фильтрации
   - Пример: `Для мам, Для детей`, `Веган, Без глютена`

6. **Срок хранения** (текст)
   - Срок хранения блюда
   - Пример: `2-3 дня`, `до 2х дней`, `3 дня в холодильнике`

7. **Состав** (текст)
   - Полный состав блюда
   - Может содержать переносы строк
   - Пример: `Бульон говяжий, овощи, сметана`

8. **Аллергены** (текст, через запятую)
   - Список аллергенов
   - Пример: `глютен, молоко, яйца`

9. **Фото** (URL)
   - Ссылка на изображение блюда
   - Пример: `https://example.com/photo.jpg`

10. **Alt** (текст)
    - Alt текст для изображения (SEO)
    - Пример: `Борщ с овощами и сметаной`

11. **КБЖУ** (текст)
    - Калории, белки, жиры, углеводы
    - Формат: `~120 ккал, Б ~3 г, Ж ~5 г, У ~15 г`
    - Пример: `~120 ккал, Б ~3 г, Ж ~5 г, У ~15 г`

12. **Тип продажи** (текст)
    - Тип продажи блюда
    - Возможные значения:
      - `smart_food` — только Smart Food (по умолчанию)
      - `mercat` — только Mercat
      - `both` — доступно в обоих разделах
    - Пример: `smart_food`, `mercat`, `both`

13. **Glovo/Uber** (текст или число)
    - Доступность на Glovo/Uber
    - Возможные значения:
      - `1`, `да`, `yes` — доступно
      - `0` — недоступно (по умолчанию)
    - Пример: `1`, `да`, `0`

14. **Glovo URL** (URL, опционально)
    - Ссылка на блюдо в Glovo
    - Пример: `https://glovoapp.com/restaurant/...`

15. **Uber URL** (URL, опционально)
    - Ссылка на блюдо в Uber Eats
    - Пример: `https://ubereats.com/restaurant/...`

16. **Активно** (текст или число)
    - Активность блюда (отображается на сайте)
    - Возможные значения:
      - `1`, `да`, `yes` или пустое — активно (по умолчанию)
      - `0` — неактивно
    - Пример: `1`, `да`, `0`

## Пример CSV файла

```csv
Название,Цена,Единица,Категория,Теги,Срок хранения,Состав,Аллергены,Фото,Alt,КБЖУ,Тип продажи,Glovo/Uber,Glovo URL,Uber URL,Активно
Борщ,6.5,500 мл,Суп,"Для мам, Для детей","2-3 дня","Бульон говяжий, овощи, сметана","глютен, молоко",https://example.com/borch.jpg,Борщ с овощами,"~120 ккал, Б ~3 г, Ж ~5 г, У ~15 г",smart_food,1,https://glovoapp.com/restaurant/borch,https://ubereats.com/restaurant/borch,1
Паста карбонара,8.5,300 г,Паста,"Для мам, Классика","до 2х дней","Паста, бекон, яйца, пармезан","глютен, яйца, молоко",https://example.com/carbonara.jpg,Паста карбонара,"~350 ккал, Б ~15 г, Ж ~20 г, У ~40 г",smart_food,1,https://glovoapp.com/restaurant/carbonara,,1
Салат Цезарь,5.5,200 г,Mercat,"Свежее, Для детей","1 день","Салат, курица, сухарики, соус","глютен, яйца",https://example.com/caesar.jpg,Салат Цезарь,"~180 ккал, Б ~12 г, Ж ~10 г, У ~15 г",mercat,0,,,1
```

## Важные замечания

1. **Кодировка**: UTF-8
2. **Разделитель**: запятая (`,`)
3. **Кавычки**: если в поле есть запятые, используйте двойные кавычки
4. **Пустые поля**: можно оставлять пустыми (будут использованы значения по умолчанию)
5. **Порядок столбцов**: важен! Следуйте указанному порядку

## Значения по умолчанию

- **Тип продажи**: `smart_food` (если поле пустое)
- **Glovo/Uber**: `0` (недоступно, если поле пустое)
- **Активно**: `1` (активно, если поле пустое или равно `1`/`да`/`yes`)

## Архитектура

**Один Meal Builder для всех типов продаж** — правильное решение! 

- Все блюда хранятся в одном Custom Post Type (`wmb_dish`)
- Разделение происходит через мета-поле `wmb_sale_type`
- На фронтенде пользователи видят табы: Smart Food, Mercat, Glovo/Uber
- В корзине товары группируются по типам, но используют один WooCommerce продукт
- Доставка объединяется на следующий день при смешанных заказах

Это упрощает:
- Управление блюдами (одна админка)
- Импорт данных (один CSV)
- Поддержку кода (одна кодовая база)
- Аналитику (можно фильтровать по `sale_type`)

