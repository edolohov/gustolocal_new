#!/usr/bin/expect -f
# –î–µ–ø–ª–æ–π –ø–ª–∞–≥–∏–Ω–∞ weekly-meal-builder —á–µ—Ä–µ–∑ SCP

set timeout 120
set host "82.29.185.42"
set port "65002"
set user "u850527203"
set pass "hiLKov15!"

# –ü–æ–ª—É—á–∞–µ–º –ø—É—Ç—å –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π
if {[info exists env(SFTP_REMOTE_PATH)]} {
    set remote_path $env(SFTP_REMOTE_PATH)
} else {
    set remote_path "/home/u850527203/domains/gustolocal.es/public_html"
}

set plugin_path "$remote_path/wp-content/plugins/weekly-meal-builder"

puts "üöÄ –î–µ–ø–ª–æ—é –ø–ª–∞–≥–∏–Ω weekly-meal-builder..."
puts "üì¶ –ó–∞–≥—Ä—É–∂–∞—é —Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ SCP..."

# –ó–∞–≥—Ä—É–∂–∞–µ–º —Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ scp (–∑–∞–≥—Ä—É–∂–∞–µ–º –≤—Å—é –ø–∞–ø–∫—É)
spawn scp -P $port -o StrictHostKeyChecking=no -r weekly-meal-builder $user@$host:$remote_path/wp-content/plugins/

expect {
    "password:" {
        send "$pass\r"
        exp_continue
    }
    "yes/no" {
        send "yes\r"
        exp_continue
    }
    timeout {
        puts "‚ùå –¢–∞–π–º–∞—É—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è"
        exit 1
    }
    eof {
        puts "‚úÖ –§–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã!"
    }
}

puts ""
puts "‚úÖ –î–µ–ø–ª–æ–π –∑–∞–≤–µ—Ä—à–µ–Ω!"
puts ""
puts "üìù –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –∞–¥–º–∏–Ω–∫–µ WordPress:"
puts "   Meal Builder > –ë–ª—é–¥–∞ > –û—Ç–∫—Ä–æ–π—Ç–µ –ª—é–±–æ–µ –±–ª—é–¥–æ"
puts "   –í –ø—Ä–∞–≤–æ–π –∫–æ–ª–æ–Ω–∫–µ '–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –±–ª—é–¥–∞' –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –Ω–æ–≤—ã–µ –ø–æ–ª—è:"
puts "   - –§–æ—Ç–æ (URL)"
puts "   - Alt —Ç–µ–∫—Å—Ç –¥–ª—è —Ñ–æ—Ç–æ (SEO)"
puts "   - –ö–ë–ñ–£ (100 –≥)"

