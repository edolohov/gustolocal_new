#!/usr/bin/expect -f
# –î–µ–ø–ª–æ–π —Ç–µ–º—ã gustolocal —á–µ—Ä–µ–∑ SCP

set timeout 120
set host "82.29.185.42"
set port "65002"
set user "u850527203"
set pass "hiLKov15!"

if {[info exists env(SFTP_REMOTE_PATH)]} {
    set remote_path $env(SFTP_REMOTE_PATH)
} else {
    set remote_path "/home/u850527203/domains/gustolocal.es/public_html"
}

puts "üöÄ –î–µ–ø–ª–æ—é —Ç–µ–º—É gustolocal..."
puts "üì¶ –ó–∞–≥—Ä—É–∂–∞—é —Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ SCP..."

spawn scp -P $port -o StrictHostKeyChecking=no wp-content/themes/gustolocal/functions.php $user@$host:$remote_path/wp-content/themes/gustolocal/
expect {
    "password:" { send "$pass\r"; exp_continue }
    "yes/no" { send "yes\r"; exp_continue }
    timeout { puts "‚ùå –¢–∞–π–º–∞—É—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è"; exit 1 }
    eof { puts "‚úÖ functions.php –∑–∞–≥—Ä—É–∂–µ–Ω!" }
}

puts ""
puts "‚úÖ –î–µ–ø–ª–æ–π —Ç–µ–º—ã –∑–∞–≤–µ—Ä—à–µ–Ω!"
puts ""

