#!/usr/bin/expect -f
# –î–µ–ø–ª–æ–π —Ç–µ–º—ã gustolocal —á–µ—Ä–µ–∑ SCP

set timeout 120
set host "82.29.185.42"
set port "65002"
set user "u850527203"
set pass "hiLKov15!"

# –ü–æ–ª—É—á–∞–µ–º –ø—É—Ç—å –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π
if {[info exists env(SFTP_REMOTE_PATH)]} {
    set remote_path $env(SFTP_REMOTE_PATH)
} else {
    set remote_path "/home/u850527203/domains/gustolocal.es/public_html"
}

puts "üöÄ –î–µ–ø–ª–æ—é —Ç–µ–º—É gustolocal..."
puts "üì¶ –ó–∞–≥—Ä—É–∂–∞—é —Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ SCP..."

# –ó–∞–≥—Ä—É–∂–∞–µ–º style.css
spawn scp -P $port -o StrictHostKeyChecking=no wp-content/themes/gustolocal/style.css $user@$host:$remote_path/wp-content/themes/gustolocal/

expect {
    "password:" {
        send "$pass\r"
        exp_continue
    }
    "yes/no" {
        send "yes\r"
        exp_continue
    }
    timeout {
        puts "‚ùå –¢–∞–π–º–∞—É—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è"
        exit 1
    }
    eof {
        puts "‚úÖ style.css –∑–∞–≥—Ä—É–∂–µ–Ω!"
    }
}

# –ó–∞–≥—Ä—É–∂–∞–µ–º cart.php
spawn scp -P $port -o StrictHostKeyChecking=no wp-content/themes/gustolocal/woocommerce/cart/cart.php $user@$host:$remote_path/wp-content/themes/gustolocal/woocommerce/cart/

expect {
    "password:" {
        send "$pass\r"
        exp_continue
    }
    "yes/no" {
        send "yes\r"
        exp_continue
    }
    timeout {
        puts "‚ùå –¢–∞–π–º–∞—É—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è"
        exit 1
    }
    eof {
        puts "‚úÖ cart.php –∑–∞–≥—Ä—É–∂–µ–Ω!"
    }
}

puts ""
puts "‚úÖ –î–µ–ø–ª–æ–π —Ç–µ–º—ã –∑–∞–≤–µ—Ä—à–µ–Ω!"

